name: Release to Render

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    env:
      RENDER_DEPLOY_HOOK: ${{ secrets.RENDER_DEPLOY_HOOK }}
    steps:
      - name: Trigger Render deploy hook
        if: ${{ env.RENDER_DEPLOY_HOOK != '' }}
        run: |
          curl --fail --show-error --silent "$RENDER_DEPLOY_HOOK"
      - name: Skip deploy (missing secret)
        if: ${{ env.RENDER_DEPLOY_HOOK == '' }}
        run: |
          echo "RENDER_DEPLOY_HOOK is not configured. Set it in repository secrets to enable auto-release."
